(function(){var Q=YAHOO.util.Event,S=YAHOO.util.Dom,aj=YAHOO.lang,E=YAHOO.env.ua,d=YAHOO.widget.Panel,G=YAHOO.widget.Tooltip,f=YAHOO.widget.Module.prototype,ah=f.initDefaultConfig,W=f._initResizeMonitor,g=YAHOO.widget.Overlay.prototype,J=g.showIframe,Y,a,M=false,x,P,b=false,Z={},ab={},t="aria-",ai="role",U="presentation",I="usearia",L="blur",af="focus",B="visible",w="beforeHide",O="dialog",z="describedby",aa="context",i="hidden",j="container-close",r="a",V="href",m="button",ak="keydown",l="beforeShow",ae="close",v="alertdialog",y="labelledby",u="xy",F="tooltip",T="destroy";var o=function(al,am){al.setAttribute(ai,am)};var q=function(al,an,am){al.setAttribute((t+an),am)};aj.augmentObject(f,{_initResizeMonitor:function(){W.call(this);var al=this.resizeMonitor;if(al){o(al,U);al.tabIndex=-1}},configUseARIA:function(am,al){},configDescribedBy:function(an,am){var al=am[0];if(this.cfg.getProperty(I)&&al){q(this.element,z,al)}},configLabelledBy:function(an,am){var al=am[0];if(this.cfg.getProperty(I)&&al){q(this.element,y,al)}},initDefaultConfig:function(){this.cfg.addProperty(I,{handler:this.configUseARIA,value:(E.gecko&&E.gecko>=1.9)||(E.ie&&E.ie>=8),validator:aj.isBoolean});this.cfg.addProperty(y,{handler:this.configLabelledBy,validator:aj.isString});this.cfg.addProperty(z,{handler:this.configDescribedBy,validator:aj.isString});ah.call(this)}},"initDefaultConfig","configUseARIA","configLabelledBy","configDescribedBy","_initResizeMonitor");g.showIframe=function(){J.call(this);var al=this.iframe;if(this.cfg.getProperty(I)&&al&&!al.getAttribute(ai)){o(al,U);al.tabIndex=-1}};var h=function(am){var al=Q.getCharCode(am);if(al===27){if(this.cancel){this.cancel()}else{this.hide()}}};var n=function(al){this.fireEvent(af,al)};var ad=function(al){this.fireEvent(L,al)};var ag=function(an,am){var al=am[0];if(P._manageFocus(this)){if(this.cfg.getProperty(B)&&this.focusFirst){if(!al){this.focusFirst()}}}};var c=function(an,am){var al=am[0];if(P._manageBlur(this)&&!al){this.fireEvent(L)}};var D=function(an,al,am){this.blur();if(am&&am.focus){try{am.focus()}catch(ao){}}this.unsubscribe(w,D,am)};var p=function(){this.subscribe(w,D,x)};var e=function(){var al=this.cfg.getProperty(ai)===O?this.innerElement:this.body;q(al,i,!this.cfg.getProperty(B))};var s=function(){S.getElementsByClassName(j,r,this.element,function(al){al.removeAttribute(V);o(al,m);al.tabIndex=0})};var X=function(am,al){var an=al[0];if(an){s.call(this)}};if(d){Y=d.prototype;a=Y.initDefaultConfig;aj.augmentObject(Y,{hasFocus:function(){return(P&&this===P.getActive())},configUseARIA:function(an,am){var al=am[0];if(al){if(!P){P=new YAHOO.widget.OverlayManager()}P.register(this);this.focus=function(){if(!this.hasFocus()){this.fireEvent(af)}};this.blur=function(){if(this.hasFocus()){this.fireEvent(L)}};Q.onFocus(this.element,n,null,this);Q.onBlur(this.element,ad,null,this);this.subscribe(af,ag);this.subscribe(L,c);Q.on(this.element,ak,h,null,this);this.subscribe(l,p);e.call(this);this.cfg.subscribeToConfigEvent(B,e);this.cfg.subscribeToConfigEvent(ae,X);if(!M){Q.onFocus(document,function(ao){x=Q.getTarget(ao)});M=true}}},configDescribedBy:function(ao,am){var al=am[0],an;if(this.cfg.getProperty(I)&&al){an=this.cfg.getProperty(ai)===O?this.innerElement:this.body;q(an,z,al)}},configLabelledBy:function(ao,am){var al=am[0],an;if(this.cfg.getProperty(I)&&al){an=this.cfg.getProperty(ai)===O?this.innerElement:this.body;q(an,y,al)}},configRole:function(aq,an){var ap=an[0],ao,al,am;if(ap){switch(ap){case O:ao=this.innerElement;break;case v:ao=this.body;break}if(ao){o(ao,ap);al=this.header;am=al.id||S.generateId(al);this.cfg.setProperty(y,am);s.call(this)}}},initDefaultConfig:function(){a.call(this);this.cfg.addProperty(ai,{handler:this.configRole,value:O,validator:aj.isString})}},"initDefaultConfig","configRole","configUseARIA","configLabelledBy","configDescribedBy","hasFocus")}var k=function(an){var al=Q.getTarget(an),ao=ab[al.id],am;if(ao){am=S.getXY(al);ao.cfg.setProperty(u,[am[0],(am[1]+al.offsetHeight+5)]);ao.show()}};var H=function(am){var al=Q.getTarget(am),an=ab[al.id];if(an&&an.cfg.getProperty(B)){an.hide()}};var R=function(am){var al=am.id,an=ab[al];if(an===this){delete ab[al];am.removeAttribute(z)}};var C=function(){var am=this.id,al=Z[am];S.batch(al,R,this,true);Z[am]=null};var K=function(am){var al=am.id||S.generateId(am);ab[al]=this;q(am,z,this.element.id)};var A=function(){var al=this.cfg.getProperty(aa);S.batch(al,K,this,true);Z[this.element.id]=al};var N=function(an,al){C.call(this);var am=al[0];if(am){A.call(this)}};var ac=function(){q(this.body,i,!this.cfg.getProperty(B))};if(G){G.prototype.configUseARIA=function(an,am){var al=am[0];if(al){o(this.body,F);this.cfg.subscribeToConfigEvent(aa,N);ac.call(this);this.cfg.subscribeToConfigEvent(B,ac);this.subscribe(T,C);if(!b){Q.onFocus(document,k);Q.onBlur(document,H);b=true}}}}}());